<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Carte Géologique de Montréal</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.21/esri/themes/light/main.css">
    <script src="https://js.arcgis.com/4.21/"></script>
    <style>
        html, body, #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
        #viewDiv {
            position: absolute;
            top: 100px;
            bottom: 0;
            width: 100%;
        }
        .navbar {
            z-index: 1000;
            width: 100%;
            background-color: rgb(203, 213, 225);
            overflow: hidden;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            padding: 10px 30px;
            box-sizing: border-box;
            max-height: 100px;
            height: 100px;
        }

        .navbar img {
            max-height: 90px;
            max-width: 200px;
            margin: 10px;
        }
    </style>
</head>
<body>
<div class="navbar">
    <img src="https://mma.prnewswire.com/media/1482181/Pomerleau_Inc__Pomerleau_et_la_Factry_annoncent_la_cr_ation_du_a_2.jpg?w=400" alt="Pomerleau">
    <h1>POC ArcGis JS</h1>
    <img src="https://www.acensi.ca/bundles/pageoverride/img/logo-acensi-bleu.svg" alt="Acensi">
</div>

<div id="viewDiv"></div>
<script>
    require([
        "esri/Map",
        "esri/views/MapView",
        "esri/layers/GraphicsLayer",
        "esri/Graphic",
        "esri/widgets/Popup"
    ], function(Map, MapView, GraphicsLayer, Graphic, Popup) {
        var map = new Map({
            basemap: "topo-vector"
        });

        var view = new MapView({
            container: "viewDiv",
            map: map,
            center: [-73.5673, 45.5017], // Longitude, latitude de Montréal
            zoom: 10
        });

        var graphicsLayer = new GraphicsLayer();
        map.add(graphicsLayer);

        // Coordonnées approximatives de la carrière de pierre de Saint-Bruno
        var quarryPoint = {
            type: "point",
            longitude: -73.332,
            latitude: 45.535
        };

        var quarryPoint2 = {
            type: "point",
            longitude: -75.332,
            latitude: 45.535
        };

        var quarrySymbol = {
            type: "simple-marker",
            color: [226, 119, 40],
            outline: {
                color: [255, 255, 255],
                width: 2
            }
        };

        var quarryPopupTemplate = {
            title: "Carrière de Pierre de Saint-Bruno",
            content: `
                    <b>Type de Pierre :</b> Calcaire<br>
                    <b>Profondeur :</b> 50 mètres<br>
                    <b>Qualité :</b> Haute<br>
                    <b>Réserves Estimées :</b> 1,2 million de tonnes<br>
                `
        };

        var quarryGraphic = new Graphic({
            geometry: quarryPoint,
            symbol: quarrySymbol,
            popupTemplate: quarryPopupTemplate
        });

        var quarryGraphic2 = new Graphic({
            geometry: quarryPoint2,
            symbol: quarrySymbol,
            popupTemplate: quarryPopupTemplate
        });

        graphicsLayer.add(quarryGraphic);
        graphicsLayer.add(quarryGraphic2);

        view.on("click", function(event) {
            view.hitTest(event).then(function(response) {
                var graphic = response.results[0].graphic;
                if (graphic) {
                    view.popup.open({
                        location: event.mapPoint,
                        features: [graphic],
                        updateLocationEnabled: true
                    });
                }
            });
        });
    });
</script>
</body>
</html>
